{
  "info": {
    "_postman_id": "41c8c901-f218-40eb-bec6-106dafa899cb",
    "name": "Renaix API REST - Completa",
    "description": "Colecci√≥n completa de endpoints para la API REST de Renaix.\n\n**Instrucciones de uso:**\n\n1. Importar esta colecci√≥n en Postman\n    \n2. Configurar las variables de entorno (ver secci√≥n Variables)\n    \n3. Ejecutar primero el endpoint de Registro o Login\n    \n4. El access_token se guardar√° autom√°ticamente\n    \n5. Probar el resto de endpoints\n    \n\n**Variables necesarias:**\n\n- `base_url`: [http://localhost:8069](http://localhost:8069)\n    \n- `access_token`: Se genera autom√°ticamente despu√©s del login\n    \n- `refresh_token`: Se genera autom√°ticamente despu√©s del login",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "item": [
    {
      "name": "üîê Autenticaci√≥n",
      "item": [
        {
          "name": "Registro de Usuario",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "8d1f219b-1e84-46ed-a415-6dbbca0c6295",
                "exec": [
                  "// Guardar tokens autom√°ticamente",
                  "if (pm.response.code === 201) {",
                  "    var jsonData = pm.response.json();",
                  "    if (jsonData.success && jsonData.data) {",
                  "        pm.environment.set('access_token', jsonData.data.access_token);",
                  "        pm.environment.set('refresh_token', jsonData.data.refresh_token);",
                  "        pm.environment.set('user_id', jsonData.data.user.id);",
                  "        console.log('‚úÖ Tokens guardados autom√°ticamente');",
                  "    }",
                  "}"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "9d7064e8-e8d7-4d12-b485-2d9fb7e111e5",
                "exec": [
                  ""
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "id": "5697f1ec-8798-415b-a82c-dc9188de5e0a",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Mani P√©rez\",\n  \"email\": \"mani.perez@example.com\",\n  \"password\": \"Password@123\",\n  \"phone\": \"612345678\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/auth/register",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "v1",
                "auth",
                "register"
              ]
            },
            "description": "Registra un nuevo usuario en la aplicaci√≥n.\n\n**Body requerido:**\n- name: Nombre completo\n- email: Email √∫nico\n- password: Contrase√±a (m√≠nimo 6 caracteres)\n- phone: Tel√©fono (opcional)\n\n**Respuesta:**\n- access_token: Token de acceso (1 hora)\n- refresh_token: Token de refresco (7 d√≠as)\n- user: Datos del usuario"
          },
          "response": []
        },
        {
          "name": "Login",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "50e697a4-6bdd-4957-a20f-31745e4d78f6",
                "exec": [
                  "// Guardar tokens autom√°ticamente",
                  "if (pm.response.code === 200) {",
                  "    var jsonData = pm.response.json();",
                  "    if (jsonData.success && jsonData.data) {",
                  "        pm.environment.set('access_token', jsonData.data.access_token);",
                  "        pm.environment.set('refresh_token', jsonData.data.refresh_token);",
                  "        pm.environment.set('user_id', jsonData.data.user.id);",
                  "        console.log('‚úÖ Tokens guardados autom√°ticamente');",
                  "    }",
                  "}"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "35a22000-b037-47d4-937d-4167611381dd",
                "exec": [
                  ""
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "id": "4aef3f0f-14b6-470d-b596-215ef5907c31",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"mani.perez@example.com\",\n  \"password\": \"Password@123\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/auth/login",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "v1",
                "auth",
                "login"
              ]
            },
            "description": "Inicia sesi√≥n con email y contrase√±a."
          },
          "response": []
        },
        {
          "name": "Renovar Token",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "// Guardar nuevo access_token",
                  "if (pm.response.code === 200) {",
                  "    var jsonData = pm.response.json();",
                  "    if (jsonData.success && jsonData.data) {",
                  "        pm.environment.set('access_token', jsonData.data.access_token);",
                  "        console.log('‚úÖ Access token renovado');",
                  "    }",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "id": "879b2e75-949c-4e01-ab1e-2e27b0282f8b",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"refresh_token\": \"{{refresh_token}}\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/auth/refresh",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "v1",
                "auth",
                "refresh"
              ]
            },
            "description": "Renueva el access_token usando el refresh_token.\n\nUsar cuando el access_token expira (despu√©s de 1 hora)."
          },
          "response": []
        },
        {
          "name": "Logout",
          "id": "e372103e-7bf0-4f9a-bce4-edc8eb1b489c",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/auth/logout",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "v1",
                "auth",
                "logout"
              ]
            },
            "description": "Cierra sesi√≥n e invalida el refresh_token."
          },
          "response": []
        }
      ],
      "id": "e14ab29c-327d-4ecc-b7f3-424ea144f21f",
      "description": "Endpoints de autenticaci√≥n JWT"
    },
    {
      "name": "üë§ Usuarios",
      "item": [
        {
          "name": "Mi Perfil",
          "id": "f5a185f2-bb76-4314-85ac-a3623b7d9e99",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/usuarios/perfil",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "v1",
                "usuarios",
                "perfil"
              ]
            },
            "description": "Obtiene el perfil del usuario autenticado."
          },
          "response": []
        },
        {
          "name": "Actualizar Mi Perfil",
          "id": "fe68f616-dd74-43c7-8cd1-c7cc09573018",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Juan P√©rez Actualizado\",\n  \"phone\": \"612345679\",\n  \"mobile\": \"698765432\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/usuarios/perfil",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "v1",
                "usuarios",
                "perfil"
              ]
            },
            "description": "Actualiza los datos del perfil."
          },
          "response": []
        },
        {
          "name": "Ver Perfil P√∫blico",
          "id": "5b5d06d1-f539-40b7-b93a-0493880e6947",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/v1/usuarios/{{user_id}}",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "v1",
                "usuarios",
                "{{user_id}}"
              ]
            },
            "description": "Ver perfil p√∫blico de cualquier usuario."
          },
          "response": []
        },
        {
          "name": "Mis Productos",
          "id": "053b4027-7bf8-416c-981c-8ae59d5a2453",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/usuarios/perfil/productos?page=1&limit=20",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "v1",
                "usuarios",
                "perfil",
                "productos"
              ],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "20"
                }
              ]
            },
            "description": "Lista mis productos publicados."
          },
          "response": []
        },
        {
          "name": "Mis Compras",
          "id": "b5efb924-9c39-45d8-a7c3-5d1c93adff3b",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/usuarios/perfil/compras",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "v1",
                "usuarios",
                "perfil",
                "compras"
              ]
            },
            "description": "Lista mis compras realizadas."
          },
          "response": []
        },
        {
          "name": "Mis Ventas",
          "id": "49a157f3-33da-4e79-a078-30ee18d762c3",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/usuarios/perfil/ventas",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "v1",
                "usuarios",
                "perfil",
                "ventas"
              ]
            },
            "description": "Lista mis ventas realizadas."
          },
          "response": []
        },
        {
          "name": "Mis Valoraciones",
          "id": "0e456c9e-2bfa-409a-b7ca-952625429f1a",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/usuarios/perfil/valoraciones",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "v1",
                "usuarios",
                "perfil",
                "valoraciones"
              ]
            },
            "description": "Lista valoraciones recibidas."
          },
          "response": []
        },
        {
          "name": "Mis Estad√≠sticas",
          "id": "1587ab5b-0dde-43c8-839c-5f93c30bf093",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/usuarios/perfil/estadisticas",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "v1",
                "usuarios",
                "perfil",
                "estadisticas"
              ]
            },
            "description": "Obtiene estad√≠sticas del usuario."
          },
          "response": []
        }
      ],
      "id": "319e5f07-034f-47a7-967b-e30d01b4e55c",
      "description": "Gesti√≥n de usuarios y perfiles"
    },
    {
      "name": "üì¶ Productos",
      "item": [
        {
          "name": "Listar Productos (P√∫blico)",
          "id": "ccd98843-41c9-45a3-bf93-07a3b77f9ab8",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/v1/productos?page=1&limit=20&estado_venta=disponible",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "v1",
                "productos"
              ],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "20"
                },
                {
                  "key": "estado_venta",
                  "value": "disponible"
                }
              ]
            },
            "description": "Lista productos disponibles (p√∫blico, no requiere autenticaci√≥n)."
          },
          "response": []
        },
        {
          "name": "Detalle Producto (P√∫blico)",
          "id": "6bfb29fd-ef02-4064-9db0-51e3c118fe1c",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/v1/productos/1",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "v1",
                "productos",
                "1"
              ]
            },
            "description": "Obtiene detalle completo de un producto incluyendo im√°genes y comentarios."
          },
          "response": []
        },
        {
          "name": "Crear Producto",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "// Guardar ID del producto creado",
                  "if (pm.response.code === 201) {",
                  "    var jsonData = pm.response.json();",
                  "    if (jsonData.success && jsonData.data) {",
                  "        pm.environment.set('producto_id', jsonData.data.id);",
                  "        console.log('‚úÖ Producto creado con ID:', jsonData.data.id);",
                  "    }",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "id": "9e5b98da-f838-4af5-ad7c-d15b4a1dd789",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"nombre\": \"iPhone 12 Pro\",\n  \"descripcion\": \"Excelente estado, bater√≠a al 85%. Incluye cargador original.\",\n  \"precio\": 450.00,\n  \"categoria_id\": 1,\n  \"estado_producto\": \"como_nuevo\",\n  \"antiguedad\": \"1_anno\",\n  \"ubicacion\": \"Madrid\",\n  \"etiqueta_ids\": [1, 2]\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/productos",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "v1",
                "productos"
              ]
            },
            "description": "Crea un nuevo producto.\n\n**Estados disponibles:**\n- nuevo\n- como_nuevo\n- buen_estado\n- usado\n- para_piezas\n\n**Antig√ºedad:**\n- menos_6_meses\n- 6_meses\n- 1_anno\n- 2_annos\n- mas_2_annos"
          },
          "response": []
        },
        {
          "name": "Actualizar Producto",
          "id": "1e02d0b0-8372-47e3-9cb2-2efb078cd918",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"nombre\": \"iPhone 12 Pro - Actualizado\",\n  \"precio\": 420.00,\n  \"descripcion\": \"Precio rebajado. Excelente estado.\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/productos/18",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "v1",
                "productos",
                "18"
              ]
            },
            "description": "Actualiza un producto (solo el propietario)."
          },
          "response": []
        },
        {
          "name": "Publicar Producto",
          "id": "62af1a2f-abaa-46d7-82da-e51576920719",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/productos/{{producto_id}}/publicar",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "v1",
                "productos",
                "{{producto_id}}",
                "publicar"
              ]
            },
            "description": "Publica un producto (cambia de borrador a disponible)."
          },
          "response": []
        },
        {
          "name": "Eliminar Producto",
          "id": "afed5d57-326a-4644-8c84-46cf057359e3",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/productos/{{producto_id}}",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "v1",
                "productos",
                "{{producto_id}}"
              ]
            },
            "description": "Elimina un producto (soft delete)."
          },
          "response": []
        },
        {
          "name": "B√∫squeda Avanzada (P√∫blico)",
          "id": "159fb3cc-884c-4766-8743-0469aa0cc9db",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/v1/productos/buscar?query=iphone&precio_max=500&categoria_id=1&orden=precio_asc&page=1&limit=20",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "v1",
                "productos",
                "buscar"
              ],
              "query": [
                {
                  "key": "query",
                  "value": "iphone",
                  "description": "B√∫squeda de texto"
                },
                {
                  "key": "precio_max",
                  "value": "500",
                  "description": "Precio m√°ximo"
                },
                {
                  "key": "precio_min",
                  "value": null,
                  "description": "Precio m√≠nimo",
                  "disabled": true
                },
                {
                  "key": "categoria_id",
                  "value": "1",
                  "description": "ID de categor√≠a"
                },
                {
                  "key": "etiquetas",
                  "value": null,
                  "description": "IDs separadas por comas",
                  "disabled": true
                },
                {
                  "key": "estado_producto",
                  "value": null,
                  "description": "Estado del producto",
                  "disabled": true
                },
                {
                  "key": "ubicacion",
                  "value": null,
                  "description": "Ubicaci√≥n",
                  "disabled": true
                },
                {
                  "key": "orden",
                  "value": "precio_asc",
                  "description": "precio_asc, precio_desc, fecha_desc, fecha_asc"
                },
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "20"
                }
              ]
            },
            "description": "B√∫squeda avanzada con m√∫ltiples filtros."
          },
          "response": []
        },
        {
          "name": "A√±adir Imagen",
          "id": "b7de4eed-4640-4431-b777-b49b38c4b8fe",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"url_imagen\": \"https://example.com/iphone12.jpg\",\n  \"es_principal\": true,\n  \"descripcion\": \"Vista frontal\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/productos/{{producto_id}}/imagenes",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "v1",
                "productos",
                "{{producto_id}}",
                "imagenes"
              ]
            },
            "description": "A√±ade una imagen a un producto."
          },
          "response": []
        },
        {
          "name": "Eliminar Imagen",
          "id": "333afc2e-a38a-49a4-8531-2a9ed94d186b",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/productos/{{producto_id}}/imagenes/1",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "v1",
                "productos",
                "{{producto_id}}",
                "imagenes",
                "1"
              ]
            },
            "description": "Elimina una imagen de un producto."
          },
          "response": []
        }
      ],
      "id": "da7810b2-0b4d-448c-842e-63f7e7411962",
      "description": "CRUD y b√∫squeda de productos"
    },
    {
      "name": "üõí Compras",
      "item": [
        {
          "name": "Comprar Producto",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "// Guardar ID de la compra",
                  "if (pm.response.code === 201) {",
                  "    var jsonData = pm.response.json();",
                  "    if (jsonData.success && jsonData.data) {",
                  "        pm.environment.set('compra_id', jsonData.data.id);",
                  "        console.log('‚úÖ Compra creada con ID:', jsonData.data.id);",
                  "    }",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "id": "29ecf46e-ec49-40b6-b8ac-3daec5d59144",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"producto_id\": 1,\n  \"notas\": \"¬øPuedo recogerlo ma√±ana por la tarde?\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/compras",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "v1",
                "compras"
              ]
            },
            "description": "Compra un producto disponible.\n\nCambia el estado del producto a 'reservado'."
          },
          "response": []
        },
        {
          "name": "Detalle de Compra",
          "id": "a5b2cabb-71b2-472e-bc33-1d4f1158847c",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/compras/{{compra_id}}",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "v1",
                "compras",
                "{{compra_id}}"
              ]
            },
            "description": "Obtiene detalle de una compra (comprador o vendedor)."
          },
          "response": []
        },
        {
          "name": "Confirmar Compra (Vendedor)",
          "id": "378d5b2d-d5e8-472d-bfca-e74853d397fa",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/compras/{{compra_id}}/confirmar",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "v1",
                "compras",
                "{{compra_id}}",
                "confirmar"
              ]
            },
            "description": "El vendedor confirma la compra.\n\nCambia estado de 'pendiente' a 'confirmada'."
          },
          "response": []
        },
        {
          "name": "Completar Compra (Comprador)",
          "id": "f761ed21-5e33-4505-a337-1e7e18a11a97",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/compras/{{compra_id}}/completar",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "v1",
                "compras",
                "{{compra_id}}",
                "completar"
              ]
            },
            "description": "El comprador confirma recepci√≥n del producto.\n\nCambia estado de 'confirmada' a 'completada'.\nEl producto cambia a estado 'vendido'."
          },
          "response": []
        },
        {
          "name": "Cancelar Compra",
          "id": "e96462d1-5fe8-4636-87b5-13954f6d0c04",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/compras/{{compra_id}}/cancelar",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "v1",
                "compras",
                "{{compra_id}}",
                "cancelar"
              ]
            },
            "description": "Cancela una compra (comprador o vendedor).\n\nEl producto vuelve a estado 'disponible'."
          },
          "response": []
        }
      ],
      "id": "079d3312-e3af-48cf-9399-c5132ffc093d",
      "description": "Flujo completo de compra-venta"
    },
    {
      "name": "üí¨ Comentarios",
      "item": [
        {
          "name": "Listar Comentarios (P√∫blico)",
          "id": "0c84fbd0-b49b-4129-bddf-c9499109caa7",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/v1/productos/1/comentarios",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "v1",
                "productos",
                "1",
                "comentarios"
              ]
            },
            "description": "Lista comentarios de un producto."
          },
          "response": []
        },
        {
          "name": "Crear Comentario",
          "id": "3e12a3d1-0034-471d-a527-de5a5f200fa8",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"texto\": \"¬øTodav√≠a est√° disponible? Estoy interesado.\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/productos/1/comentarios",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "v1",
                "productos",
                "1",
                "comentarios"
              ]
            },
            "description": "Crea un comentario en un producto."
          },
          "response": []
        },
        {
          "name": "Eliminar Comentario",
          "id": "5438716c-003c-4b66-8165-9bc0d7fd6bf6",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/comentarios/1",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "v1",
                "comentarios",
                "1"
              ]
            },
            "description": "Elimina un comentario propio."
          },
          "response": []
        }
      ],
      "id": "abd8007a-626c-414b-b0f8-fa3a7142737c",
      "description": "Comentarios en productos"
    },
    {
      "name": "‚≠ê Valoraciones",
      "item": [
        {
          "name": "Valorar Transacci√≥n",
          "id": "371996cf-c18f-4825-872b-cff2c907a38f",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"puntuacion\": 5,\n  \"comentario\": \"Excelente vendedor, muy r√°pido en la entrega.\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/compras/{{compra_id}}/valorar",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "v1",
                "compras",
                "{{compra_id}}",
                "valorar"
              ]
            },
            "description": "Valora una transacci√≥n completada.\n\n**Puntuaci√≥n:** 1-5 estrellas\n**Comentario:** Opcional\n\nSolo se puede valorar una vez por transacci√≥n."
          },
          "response": []
        },
        {
          "name": "Ver Valoraciones de Usuario",
          "id": "c3762d22-5727-4fe2-8833-bf4edc190427",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/v1/usuarios/{{user_id}}/valoraciones",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "v1",
                "usuarios",
                "{{user_id}}",
                "valoraciones"
              ]
            },
            "description": "Ver valoraciones recibidas por un usuario."
          },
          "response": []
        }
      ],
      "id": "5239c3cf-e851-413a-93c3-550a7cfc78dd",
      "description": "Sistema de valoraciones"
    },
    {
      "name": "üíå Mensajes",
      "item": [
        {
          "name": "Mis Conversaciones",
          "id": "d66dd086-a774-4ebc-b55d-9d863e19fb79",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/mensajes/conversaciones",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "v1",
                "mensajes",
                "conversaciones"
              ]
            },
            "description": "Lista todas mis conversaciones."
          },
          "response": []
        },
        {
          "name": "Enviar Mensaje",
          "id": "33f46621-79dd-497e-b7f1-84d9e47097b6",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"receptor_id\": 2,\n  \"texto\": \"Hola, ¬øel producto sigue disponible?\",\n  \"producto_id\": 1\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/mensajes",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "v1",
                "mensajes"
              ]
            },
            "description": "Env√≠a un mensaje a otro usuario.\n\n**producto_id:** Opcional, para vincular el mensaje a un producto."
          },
          "response": []
        },
        {
          "name": "Marcar Mensaje como Le√≠do",
          "id": "50a92855-963d-47e7-a286-652dec4dcc73",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/mensajes/1/marcar-leido",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "v1",
                "mensajes",
                "1",
                "marcar-leido"
              ]
            },
            "description": "Marca un mensaje como le√≠do."
          },
          "response": []
        }
      ],
      "id": "2533fc50-0519-41c3-925d-6ea6a885d78e",
      "description": "Sistema de mensajer√≠a"
    },
    {
      "name": "üö® Denuncias",
      "item": [
        {
          "name": "Crear Denuncia",
          "id": "c91c4741-6e36-4be3-ad9c-976966a5073f",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"tipo\": \"producto\",\n  \"producto_id\": 1,\n  \"categoria\": \"fraude\",\n  \"motivo\": \"El producto no corresponde con la descripci√≥n. Las fotos son enga√±osas.\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/denuncias",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "v1",
                "denuncias"
              ]
            },
            "description": "Crea una denuncia.\n\n**Tipos:**\n- producto\n- comentario\n- usuario\n\n**Categor√≠as:**\n- spam\n- ofensivo\n- fraude\n- contenido_inapropiado\n- otro"
          },
          "response": []
        },
        {
          "name": "Mis Denuncias",
          "id": "e1618fdb-68a1-44ad-aa4c-d25771ad52dc",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{access_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/denuncias/mis-denuncias",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "v1",
                "denuncias",
                "mis-denuncias"
              ]
            },
            "description": "Lista mis denuncias realizadas."
          },
          "response": []
        }
      ],
      "id": "d104d0cd-f1d7-4289-8328-2bf4c9548286",
      "description": "Sistema de denuncias"
    },
    {
      "name": "üè∑Ô∏è Categor√≠as y Etiquetas",
      "item": [
        {
          "name": "Listar Categor√≠as (P√∫blico)",
          "id": "0adbd719-38f0-4293-86ae-11547fafd216",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/v1/categorias",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "v1",
                "categorias"
              ]
            },
            "description": "Lista todas las categor√≠as disponibles."
          },
          "response": []
        },
        {
          "name": "Etiquetas Populares (P√∫blico)",
          "id": "4ae5f377-ef7c-4553-b445-2f8aab667090",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/v1/etiquetas",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "v1",
                "etiquetas"
              ]
            },
            "description": "Lista las 50 etiquetas m√°s populares."
          },
          "response": []
        },
        {
          "name": "Buscar Etiquetas (P√∫blico)",
          "id": "534b0b17-b44a-446f-b6e2-f8fac6dd05df",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/v1/etiquetas/buscar?q=gaming",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "v1",
                "etiquetas",
                "buscar"
              ],
              "query": [
                {
                  "key": "q",
                  "value": "gaming",
                  "description": "T√©rmino de b√∫squeda (m√≠nimo 2 caracteres)"
                }
              ]
            },
            "description": "Busca etiquetas por nombre."
          },
          "response": []
        }
      ],
      "id": "09f76e4f-3bac-4fbf-9586-912ae237544d",
      "description": "Categor√≠as y etiquetas del sistema"
    }
  ],
  "event": [
    {
      "listen": "prerequest",
      "script": {
        "type": "text/javascript",
        "exec": [
          "// Headers autom√°ticos para todas las peticiones",
          "pm.request.headers.add({key: 'Accept', value: 'application/json'});",
          "pm.request.headers.add({key: 'Content-Type', value: 'application/json'});",
          "pm.request.headers.add({key: 'User-Agent', value: 'Mozilla/5.0 (compatible; PostmanRuntime/7.0)'});"
        ]
      }
    }
  ],
  "variable": [
    {
      "id": "15edc93b-e6d5-4444-810d-749dadc0d134",
      "key": "base_url",
      "value": "http://localhost:8069",
      "type": "string"
    },
    {
      "id": "ffea8f83-5f6f-4562-8447-87e694c43fc2",
      "key": "access_token",
      "value": "",
      "type": "string"
    },
    {
      "id": "94d25b1c-6c6a-421c-b51c-0d2d4b245091",
      "key": "refresh_token",
      "value": "",
      "type": "string"
    },
    {
      "id": "052ac5e7-f972-444d-b8a4-6c8f2ad988a0",
      "key": "user_id",
      "value": "",
      "type": "string"
    },
    {
      "id": "34f4420e-6bce-4108-a416-a1329ded8f61",
      "key": "producto_id",
      "value": "",
      "type": "string"
    },
    {
      "id": "b8d15c2d-b05d-4f8c-b693-51114b1c525e",
      "key": "compra_id",
      "value": "",
      "type": "string"
    }
  ]
}